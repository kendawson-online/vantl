var Timeline=function(e){"use strict";const t={modal:null,overlay:null},i={};function n(){if(t.modal)return;t.overlay=document.createElement("div"),t.overlay.className="timeline-modal-overlay",t.overlay.addEventListener("click",a),t.modal=document.createElement("div"),t.modal.className="timeline-modal",t.modal.innerHTML='\n    <button class="timeline-modal__close" aria-label="Close modal"></button>\n    <div class="timeline-modal__content">\n      <img class="timeline-modal__image" src="" alt="" loading="lazy" style="display: none;">\n      <h2 class="timeline-modal__title"></h2>\n      <div class="timeline-modal__text"></div>\n    </div>\n    <div class="timeline-modal__footer">\n      <button class="timeline-modal__close-bottom">Close</button>\n    </div>\n  ';const e=t.modal.querySelector(".timeline-modal__close"),i=t.modal.querySelector(".timeline-modal__close-bottom");e.addEventListener("click",a),i.addEventListener("click",a),t.modal.addEventListener("click",function(e){e.stopPropagation()}),document.body.appendChild(t.overlay),document.body.appendChild(t.modal),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.modal.classList.contains("timeline-modal-show")&&a()})}function o(e){t.modal||n();const i=e.getAttribute("data-modal-title"),o=e.getAttribute("data-modal-content"),a=e.getAttribute("data-modal-image"),l=e.getAttribute("data-modal-html"),r=t.modal.querySelector(".timeline-modal__title"),s=t.modal.querySelector(".timeline-modal__text"),d=t.modal.querySelector(".timeline-modal__image");r.textContent=i||"",a?(d.src=a,d.alt=i||"",d.style.display="block"):d.style.display="none",s.innerHTML=l||(o?"<p>"+o.replace(/\n/g,"</p><p>")+"</p>":""),setTimeout(function(){t.modal.classList.add("timeline-modal-show"),t.overlay.classList.add("timeline-modal-show"),document.body.style.overflow="hidden"},10)}function a(){t.modal&&(t.modal.classList.remove("timeline-modal-show"),t.overlay.classList.remove("timeline-modal-show"),document.body.style.overflow="")}function l(e){const t=new URLSearchParams(window.location.search),i=t.get("timeline"),n=t.get("id");if(!n)return;let o;if(o=i?document.getElementById(i):document.querySelector(e),!o)return void console.warn("Timeline not found for deep linking:",i||e);o.scrollIntoView({behavior:"smooth",block:"start"});const a=o.querySelector('[data-node-id="'+n+'"]');a&&setTimeout(function(){o.querySelectorAll(".timeline__item--active").forEach(e=>e.classList.remove("timeline__item--active")),a.classList.add("timeline__item--active");const e=Array.from(a.parentNode.children).indexOf(a);r(o,e)},500)}function r(e,t){if(!e)return;const n=e.id||e.getAttribute("data-timeline-id");if(!n)return void console.warn("Cannot navigate: timeline container has no ID");const o=i[n];o?e.classList.contains("timeline--horizontal")&&o.setCurrentIndex&&o.updatePosition&&(o.setCurrentIndex(t),o.updatePosition()):console.warn("Timeline not found in registry:",n)}const s=function(){if("undefined"!=typeof window&&window.TimelineConfig&&window.TimelineConfig.basePath)return window.TimelineConfig.basePath;const e=document.getElementsByTagName("script");for(let t=0;t<e.length;t++){const i=e[t].src||"";if(!i)continue;const n=i.substring(0,i.lastIndexOf("/"));if(-1!==i.indexOf("timeline.min.js"))return n.replace("/dist","/src/images");if(-1!==i.indexOf("timeline.js"))return n.replace("/js","/images")}return"../src/images"}();function d(e,t,i){if(!e)return;const n={"json-load":{title:"Timeline Data Could Not Be Loaded",message:"The timeline data failed to load. This could be due to a network error or an incorrect file path.",solution:"Please check that the data-json-config path is correct and the file is accessible."},"json-parse":{title:"Invalid Timeline Data",message:"The timeline data file exists but contains invalid JSON.",solution:"Please validate your JSON using a tool like jsonlint.com and ensure it follows the correct schema."},"missing-element":{title:"Timeline Element Not Found",message:"The required timeline container element could not be found on the page.",solution:'Ensure your HTML includes a container with the class "timeline" and the correct selector.'},"invalid-config":{title:"Invalid Configuration",message:"One or more timeline configuration options are invalid.",solution:"Check your data attributes or JavaScript options and ensure they match the expected format."}}[t]||{title:"Timeline Error",message:"An unexpected error occurred while initializing the timeline.",solution:"Please check the browser console for more details."};e.classList.add("timeline--error"),e.innerHTML="";const o=document.createElement("div");o.className="timeline__error";const a=document.createElement("img");a.src=s+"/alert.svg",a.alt="Error",a.className="timeline__error-icon",a.width=200,a.style.height="auto";const l=document.createElement("h2");l.className="timeline__error-title",l.textContent=n.title;const r=document.createElement("p");r.className="timeline__error-message",r.textContent=n.message;const d=document.createElement("p");if(d.className="timeline__error-solution",d.innerHTML="<strong>Solution:</strong> "+n.solution,i){const e=document.createElement("p");e.className="timeline__error-details",e.innerHTML="<strong>Details:</strong> "+i,o.appendChild(e)}o.appendChild(a),o.appendChild(l),o.appendChild(r),o.appendChild(d),e.appendChild(o),console.error("Timeline Error ["+t+"]:",n.message,i||"");try{const o=new CustomEvent("timeline:error",{detail:{type:t,message:n.message,details:i||null,containerId:e.id||null}});window.dispatchEvent(o)}catch(e){}}function m(e){let t;if(!e||"string"!=typeof e)return 128;if(e.startsWith("#")){let i=e.substring(1);3===i.length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]);t=[parseInt(i.substring(0,2),16),parseInt(i.substring(2,4),16),parseInt(i.substring(4,6),16)]}else{if(!e.startsWith("rgb"))return 128;{const i=e.match(/\d+/g);t=i?i.map(Number):[128,128,128]}}return(299*t[0]+587*t[1]+114*t[2])/1e3}function c(e,t){let i=t.nodeColor||null,n=t.lineColor||null;const o=t.navColor||null;if(i&&!n&&(n=i),n&&!i&&(i=n),i&&(e.style.setProperty("--timeline-node-color",i),e.style.setProperty("--timeline-active-outline-color",i)),n&&e.style.setProperty("--timeline-line-color",n),o){e.style.setProperty("--timeline-nav-color",o),e.style.setProperty("--timeline-nav-border",m(o)>128?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.3)");const t=m(o)>128?"#333":"#fff";e.style.setProperty("--timeline-arrow-color",t),e.setAttribute("data-arrow-color",t)}}function u(e,t){return"left"===e?'<svg xmlns="http://www.w3.org/2000/svg" width="7.8" height="14" style="display:block;margin:auto;"><path fill="none" stroke="'+t+'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M6.8 1L1 7l5.8 6"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="7.8" height="14" style="display:block;margin:auto;"><path fill="none" stroke="'+t+'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1l5.8 6L1 13"/></svg>'}function h(e,t,i){const n=parseInt(e,10);return Number.isNaN(n)?t:Math.max(t,Math.min(i,n))}function f(e,t){if(!e||!t||"undefined"==typeof window||!window.history)return;if(!function(e){if("undefined"==typeof window||!window.location)return!1;const t=new URLSearchParams(window.location.search);if(!t.has("id"))return!1;const i=t.get("timeline");return!(i&&e&&e.id)||i===e.id}(e))return;const i=new URL(window.location.href),n=i.searchParams;e.id&&n.set("timeline",e.id),n.set("id",String(t)),i.search=n.toString(),window.history.replaceState({},"",i.toString())}function g(e,t){const n=[],a="Timeline:";let l,r=window.innerWidth,s=0;const m={minWidth:{type:"integer",defaultValue:600},maxWidth:{type:"integer",defaultValue:600},horizontalStartPosition:{type:"string",acceptedValues:["bottom","top"],defaultValue:"top"},mode:{type:"string",acceptedValues:["horizontal","vertical"],defaultValue:"vertical"},moveItems:{type:"integer",defaultValue:1},rtlMode:{type:"boolean",acceptedValues:[!0,!1],defaultValue:!1},startIndex:{type:"integer",defaultValue:0},verticalStartPosition:{type:"string",acceptedValues:["left","right"],defaultValue:"left"},verticalTrigger:{type:"string",defaultValue:"15%"}};function g(e,t,i){t.classList.add(i),e.parentNode.insertBefore(t,e),t.appendChild(e)}function p(e,t){const i=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=m.verticalTrigger.defaultValue.match(/(\d*\.?\d*)(.*)/);let a=t.unit,l=t.value,r=n;return"px"===a&&l>=n&&(console.warn('The value entered for the setting "verticalTrigger" is larger than the window height. The default value will be used instead.'),[,l,a]=o),"px"===a?r=parseInt(r-l,10):"%"===a&&(r=parseInt(r*((100-l)/100),10)),i.top<=r&&i.left<=(window.innerWidth||document.documentElement.clientWidth)&&i.top+i.height>=0&&i.left+i.width>=0}function v(e,t){e.style.webkitTransform=t,e.style.msTransform=t,e.style.transform=t}function w(e,t){const i=h(t,0,Math.max(0,e.items.length-1)),n=`translate3d(-${e.items[i].offsetLeft}px, 0, 0)`;v(e.scroller,n)}function y(e,t){e.items.forEach(e=>e.classList.remove("timeline__item--active")),e.items[t]&&e.items[t].classList.add("timeline__item--active")}function b(e){e.timelineEl.classList.add("timeline--horizontal"),function(e){if(!e||!e.classList.contains("timeline--horizontal"))return;const t={min:150,max:200,default:200},i={min:135,max:180,default:180},n={min:80,max:100,default:100},o={min:14,max:18,default:18},a={min:11,max:13,default:11},l=window.innerHeight-180,r=2*i.max+90;let s=1;function d(e){const t=Math.round(e.default*s);return Math.max(e.min,Math.min(e.max,t))}l<r&&(s=Math.max(.75,l/r)),e.style.setProperty("--timeline-h-node-width",d(t)+"px"),e.style.setProperty("--timeline-h-node-min-height",d(i)+"px"),e.style.setProperty("--timeline-h-image-size",d(n)+"px"),e.style.setProperty("--timeline-h-title-font-size",d(o)+"px"),e.style.setProperty("--timeline-h-text-font-size",d(a)+"px")}(e.timelineEl),function(e){window.innerWidth>e.settings.minWidth&&(function(){const t=getComputedStyle(e.timelineEl),i=parseInt(t.getPropertyValue("--timeline-h-node-width"))||200;e.itemWidth=i,e.items.forEach(t=>{t.style.width=`${e.itemWidth}px`}),e.scrollerWidth=e.itemWidth*e.items.length,e.scroller.style.width=`${e.scrollerWidth}px`}(),function(){let t=0,i=0;e.items.forEach((e,n)=>{e.style.height="auto";const o=e.offsetHeight;n%2==0?i=o>i?o:i:t=o>t?o:t});const n=`translateY(${i}px)`;e.items.forEach((o,a)=>{a%2==0?(o.style.height=`${i}px`,"bottom"===e.settings.horizontalStartPosition?(o.classList.add("timeline__item--bottom"),v(o,n)):o.classList.add("timeline__item--top")):(o.style.height=`${t}px`,"bottom"!==e.settings.horizontalStartPosition?(o.classList.add("timeline__item--bottom"),v(o,n)):o.classList.add("timeline__item--top"))}),e.evenIndexTallest=i,e.oddIndexTallest=t,e.scroller.style.height=`${i+t}px`;try{e.computedVisibleCount=Math.floor(e.wrap.offsetWidth/e.itemWidth)||1}catch(t){e.computedVisibleCount=1}}())}(e);const t=Math.floor(e.wrap.offsetWidth/e.itemWidth)||1;e.computedVisibleCount=t,s=e.settings.rtlMode?e.items.length>t?e.items.length-t:0:e.settings.startIndex,e.activeIndex=s,w(e,s),y(e,e.activeIndex),function(e){const t=e.wrap.offsetWidth,i=Math.floor(t/e.itemWidth);if(e.items.length>i){const t=document.createElement("button"),i=document.createElement("button"),n=e.items[0].offsetHeight;t.className="timeline-nav-button timeline-nav-button--prev",i.className="timeline-nav-button timeline-nav-button--next",t.textContent="Previous",t.title="Go to previous items",i.textContent="Next",i.title="Go to next items",t.style.top=`${n}px`,i.style.top=`${n}px`;const o=e.timelineEl.getAttribute("data-arrow-color")||"#333";t.innerHTML=u("left",o),i.innerHTML=u("right",o);const a=Math.max(0,e.items.length-1);e.activeIndex<=0&&(t.classList.add("timeline-nav-button--at-start"),t.title="Already at beginning of timeline"),e.activeIndex>=a&&(i.classList.add("timeline-nav-button--at-end"),i.title="Already at end of timeline"),e.timelineEl.appendChild(t),e.timelineEl.appendChild(i)}}(e),function(e){const t=e.timelineEl.querySelector(".timeline-divider");t&&e.timelineEl.removeChild(t);const i=e.items[0].offsetHeight,n=document.createElement("span");n.className="timeline-divider",n.style.top=`${i}px`,e.timelineEl.appendChild(n)}(e),function(e){const t=e.timelineEl.querySelectorAll(".timeline-nav-button"),i=e.timelineEl.querySelector(".timeline-nav-button--prev"),n=e.timelineEl.querySelector(".timeline-nav-button--next"),o=e.wrap.offsetWidth,a=Math.floor(o/e.itemWidth),l=Math.max(0,e.items.length-a),r=parseInt(e.settings.moveItems,10),d=function(t){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.classList.contains("timeline-nav-button--at-start")||this.classList.contains("timeline-nav-button--at-end"))return;const o=this.classList.contains("timeline-nav-button--next")?1:-1,a=Math.max(0,e.items.length-1),d=h(e.activeIndex+o*r,0,a);s=h(d,0,l),e.activeIndex=d,e.activeIndex<=0?(i.classList.add("timeline-nav-button--at-start"),i.title="Already at beginning of timeline"):(i.classList.remove("timeline-nav-button--at-start"),i.title="Go to previous items"),e.activeIndex>=a?(n.classList.add("timeline-nav-button--at-end"),n.title="Already at end of timeline"):(n.classList.remove("timeline-nav-button--at-end"),n.title="Go to next items"),w(e,s),y(e,e.activeIndex);const m=e.items[e.activeIndex],c=m&&m.getAttribute("data-node-id");c&&f(e.timelineEl,c),this.blur()};Array.from(t).forEach(t=>{t.addEventListener("click",d),e.listeners.push({element:t,type:"click",handler:d})})}(e);const n=e.timelineEl.id||e.timelineEl.getAttribute("data-timeline-id");if(n){i[n]={setCurrentIndex:function(t){const i=e.wrap.offsetWidth,n=Math.floor(i/e.itemWidth),o=Math.max(0,e.items.length-n);e.activeIndex=Math.max(0,Math.min(t,e.items.length-1)),s=Math.max(0,Math.min(t,o))},updatePosition:function(){w(e,s),y(e,e.activeIndex);const t=e.timelineEl.querySelector(".timeline-nav-button--prev"),i=e.timelineEl.querySelector(".timeline-nav-button--next");if(t&&i){const n=Math.max(0,e.items.length-1);e.activeIndex<=0?(t.classList.add("timeline-nav-button--at-start"),t.title="Already at beginning of timeline"):(t.classList.remove("timeline-nav-button--at-start"),t.title="Go to previous items"),e.activeIndex>=n?(i.classList.add("timeline-nav-button--at-end"),i.title="Already at end of timeline"):(i.classList.remove("timeline-nav-button--at-end"),i.title="Go to next items")}const n=e.items[e.activeIndex],o=n&&n.getAttribute("data-node-id");o&&f(e.timelineEl,o)}};const t=i[n];e.items.forEach((i,n)=>{const o=()=>{e.timelineEl.classList.contains("timeline--horizontal")&&t&&t.setCurrentIndex&&t.updatePosition&&(t.setCurrentIndex(n),t.updatePosition())};i.addEventListener("click",o),e.listeners.push({element:i,type:"click",handler:o})})}}function x(){n.forEach(e=>{e.timelineEl.style.opacity=0,e.timelineEl.classList.contains("timeline--loaded")||e.items.forEach(e=>{g(e.querySelector(".timeline__content"),document.createElement("div"),"timeline__content__wrap"),g(e.querySelector(".timeline__content__wrap"),document.createElement("div"),"timeline__item__inner")}),function(e){e.listeners&&e.listeners.length>0&&(e.listeners.forEach(({element:e,type:t,handler:i})=>{e.removeEventListener(t,i)}),e.listeners=[]),e.observer&&(e.observer.disconnect(),e.observer=null),e.timelineEl.classList.remove("timeline--horizontal","timeline--mobile"),e.scroller.removeAttribute("style"),e.items.forEach(e=>{e.removeAttribute("style"),e.classList.remove("animated","fadeIn","timeline__item--left","timeline__item--right")});const t=e.timelineEl.querySelectorAll(".timeline-nav-button");Array.from(t).forEach(e=>{e.parentNode.removeChild(e)})}(e),window.innerWidth<=e.settings.minWidth&&e.timelineEl.classList.add("timeline--mobile");let t=!1;("horizontal"===e.settings.mode&&window.innerWidth>e.settings.minWidth||"vertical"===e.settings.mode&&window.innerWidth>e.settings.maxWidth)&&(t=!0),t?b(e):function(e){let t=0;e.items.forEach((i,n)=>{i.classList.remove("animated","fadeIn"),!p(i,e.settings.verticalTrigger)&&n>0?i.classList.add("animated"):t=n,n%2==("left"===e.settings.verticalStartPosition?1:0)&&window.innerWidth>e.settings.minWidth?i.classList.add("timeline__item--right"):i.classList.add("timeline__item--left")});for(let i=0;i<t;i+=1)e.items[i].classList.remove("animated","fadeIn");if("IntersectionObserver"in window){const t={rootMargin:"%"===e.settings.verticalTrigger.unit?`${e.settings.verticalTrigger.value}%`:`${e.settings.verticalTrigger.value}px`,threshold:.01},i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("fadeIn")})},t);e.items.forEach(e=>{e.classList.contains("animated")&&i.observe(e)}),e.observer=i}else{const t=()=>{e.items.forEach(t=>{p(t,e.settings.verticalTrigger)&&t.classList.add("fadeIn")})};window.addEventListener("scroll",t),e.listeners.push({element:window,type:"scroll",handler:t})}}(e),e.timelineEl.classList.add("timeline--loaded")}),setTimeout(()=>{n.forEach(e=>{e.timelineEl.style.opacity=1})},500)}e.length&&Array.from(e).forEach(function(e){const i=e.id?`#${e.id}`:`.${e.className}`,l="could not be found as a direct descendant of",r=e.dataset;let s,u,h;const f={};try{if(s=e.querySelector(".timeline__wrap"),!s)throw new Error(`${a} .timeline__wrap ${l} ${i}`);if(u=s.querySelector(".timeline__items"),!u)throw new Error(`${a} .timeline__items ${l} .timeline__wrap`);h=[].slice.call(u.children,0)}catch(t){return console.warn(t.message),d(e,"missing-element",t.message),!1}Object.keys(m).forEach(e=>{if(f[e]=m[e].defaultValue,"minWidth"===e){let e;void 0!==r.minWidth&&(e=r.minWidth),void 0!==r.minwidth&&(e=r.minwidth),void 0!==r.forceVerticalMode&&(e=r.forceVerticalMode),void 0!==r.forceverticalmode&&(e=r.forceverticalmode),void 0===e&&t&&(void 0!==t.minWidth?e=t.minWidth:void 0!==t.forceVerticalMode&&(e=t.forceVerticalMode)),void 0!==e&&(f.minWidth=e)}else if("maxWidth"===e){let e;void 0!==r.maxWidth&&(e=r.maxWidth),void 0!==r.maxwidth&&(e=r.maxwidth),void 0===e&&t&&void 0!==t.maxWidth&&(e=t.maxWidth),void 0!==e&&(f.maxWidth=e)}else r[e]?f[e]=r[e]:t&&void 0!==t[e]&&(f[e]=t[e]);var i,n;"integer"===m[e].type?f[e]&&(n=e,"number"==typeof(i=f[e])||i%1==0||(console.warn(`${a} The value "${i}" entered for the setting "${n}" is not an integer.`),0))||(f[e]=m[e].defaultValue):"string"===m[e].type&&m[e].acceptedValues&&-1===m[e].acceptedValues.indexOf(f[e])&&(console.warn(`${a} The value "${f[e]}" entered for the setting "${e}" was not recognised.`),f[e]=m[e].defaultValue)}),function(){const i=e.dataset,n=function(e){return void 0!==i[e]?i[e]:void 0!==i[e&&e.toLowerCase()]?i[e.toLowerCase()]:void 0};let o=n("nodeColor"),a=n("lineColor"),l=n("navColor");t&&(void 0!==t.nodeColor&&(o=t.nodeColor),void 0!==t.lineColor&&(a=t.lineColor),void 0!==t.navColor&&(l=t.navColor)),(o||a||l)&&c(e,{nodeColor:o,lineColor:a,navColor:l})}();const g=m.verticalTrigger.defaultValue.match(/(\d*\.?\d*)(.*)/),p=f.verticalTrigger.match(/(\d*\.?\d*)(.*)/);let[,v,w]=p,y=!0;v||(console.warn(`${a} No numercial value entered for the 'verticalTrigger' setting.`),y=!1),"px"!==w&&"%"!==w&&(console.warn(`${a} The setting 'verticalTrigger' must be a percentage or pixel value.`),y=!1),"%"===w&&(v>100||v<0)?(console.warn(`${a} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`),y=!1):"px"===w&&v<0&&(console.warn(`${a} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`),y=!1),!1===y&&([,v,w]=g),f.verticalTrigger={unit:w,value:v},f.moveItems>h.length&&(console.warn(`${a} The value of "moveItems" (${f.moveItems}) is larger than the total number of items (${h.length}). It has been reduced to ${h.length}.`),f.moveItems=h.length),f.startIndex<0?(console.warn(`${a} The 'startIndex' setting must be >= 0. The value of 0 has been used instead.`),f.startIndex=0):f.startIndex>Math.max(0,h.length-1)&&(console.warn(`${a} The 'startIndex' setting is larger than the last index for this timeline. It has been reduced to ${Math.max(0,h.length-1)}.`),f.startIndex=Math.max(0,h.length-1)),function(e,t){t&&t.length&&t.forEach(function(e){"1"!==e.getAttribute("data-modal-bound")&&(function(e){if(!e)return;const t=e.querySelector(".timeline__content")||e;if(!e.hasAttribute("data-modal-title")){const i=t.querySelector("h1,h2,h3,h4,h5,h6");i&&i.textContent&&e.setAttribute("data-modal-title",i.textContent.trim())}if(!e.hasAttribute("data-modal-content")){const i=t.querySelector("p");i&&i.textContent&&e.setAttribute("data-modal-content",i.textContent.trim())}if(!e.hasAttribute("data-modal-image")){const i=t.querySelector("img");i&&i.getAttribute("src")&&e.setAttribute("data-modal-image",i.getAttribute("src"))}}(e),(e.hasAttribute("data-modal-title")||e.hasAttribute("data-modal-content")||e.hasAttribute("data-modal-image")||e.hasAttribute("data-modal-html"))&&(e.addEventListener("click",function(t){t.preventDefault(),o(e)}),e.setAttribute("data-modal-bound","1")))})}(0,h),e.id||e.setAttribute("data-timeline-id","timeline-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)),n.push({timelineEl:e,wrap:s,scroller:u,items:h,settings:f,listeners:[]})});try{x(),window.addEventListener("resize",()=>{clearTimeout(l),l=setTimeout(()=>{const e=window.innerWidth;e!==r&&(x(),r=e)},250)})}catch(e){console.error("Timeline initialization failed:",e)}}function p(e,t,i){const n=document.querySelector(e);if(!n)return console.error("Timeline: Container not found:",e),null;n.classList.remove("timeline--error");let o=n.querySelector(".timeline__items");if(o)o.innerHTML="";else{const e=document.createElement("div");e.className="timeline__wrap",o=document.createElement("div"),o.className="timeline__items",e.appendChild(o),n.appendChild(e)}if(i&&(function(e,t){t.layoutMode&&e.setAttribute("data-mode",t.layoutMode),void 0!==t.moveItems&&e.setAttribute("data-move-items",t.moveItems),void 0!==t.minWidth&&e.setAttribute("data-min-width",t.minWidth),void 0!==t.maxWidth&&e.setAttribute("data-max-width",t.maxWidth),void 0!==t.startIndex&&e.setAttribute("data-start-index",t.startIndex),void 0!==t.horizontalStartPosition&&e.setAttribute("data-horizontal-start-position",t.horizontalStartPosition),void 0!==t.verticalStartPosition&&e.setAttribute("data-vertical-start-position",t.verticalStartPosition),void 0!==t.verticalTrigger&&e.setAttribute("data-vertical-trigger",t.verticalTrigger),void 0!==t.rtlMode&&e.setAttribute("data-rtl-mode",String(t.rtlMode)),void 0!==t.nodeColor&&e.setAttribute("data-node-color",t.nodeColor),void 0!==t.lineColor&&e.setAttribute("data-line-color",t.lineColor),void 0!==t.navColor&&e.setAttribute("data-nav-color",t.navColor)}(n,i),c(n,i),i.timelineName&&""!==i.timelineName.trim())){const e=n.previousElementSibling;if(e&&e.classList.contains("timeline__title"))e.textContent=i.timelineName;else{const e=document.createElement("h1");e.className="timeline__title",e.textContent=i.timelineName,n.parentNode.insertBefore(e,n)}n.setAttribute("data-timeline-name",i.timelineName)}return Array.isArray(t)&&0!==t.length?(t.forEach(function(e){o.appendChild(function(e){const t={id:(i=e).id||null,date:i.date||"DD/MM/YYYY",heading:i.heading||"Node Title",summary:i.summary||"Lorem ipsum dolor sit amet, officia excepteur ex fugiat reprehenderit enim labore culpa sint ad nisi Lorem pariatur mollit ex esse exercitation amet. Nisi anim cupidatat excepteur officia. Reprehenderit nostrud nostrud ipsum Lorem est aliquip amet voluptate voluptate dolor minim nulla est proident.",content:i.content||"<p>Lorem ipsum dolor sit amet, officia excepteur ex fugiat reprehenderit enim labore culpa sint ad nisi Lorem pariatur mollit ex esse exercitation amet. Nisi anim cupidatat excepteur officia. Reprehenderit nostrud nostrud ipsum Lorem est aliquip amet voluptate voluptate dolor minim nulla est proident. Nostrud officia pariatur ut officia. Sit irure elit esse ea nulla sunt ex occaecat reprehenderit commodo officia dolor Lorem duis laboris cupidatat officia voluptate.</p><p>Culpa proident adipisicing id nulla nisi laboris ex in Lorem sunt duis officia eiusmod. Aliqua reprehenderit commodo ex non excepteur duis sunt velit enim. Voluptate laboris sint cupidatat ullamco ut ea consectetur et est culpa et culpa duis.</p>",image:i.image||null};var i;const n=document.createElement("div");n.className="timeline__item",t.id&&n.setAttribute("data-node-id",t.id);const o=document.createElement("div");o.className="timeline__content";const a=document.createElement("div");if(a.className="timeline__date",a.textContent=t.date,o.appendChild(a),t.image){const e=document.createElement("img");e.src=t.image,e.className="timeline__image",e.alt=t.heading,e.loading="lazy",e.onerror=function(){console.error("Timeline: Image failed to load:",t.image),this.src=s+"/missing-image.svg",this.alt="Image not found"},o.appendChild(e)}const l=document.createElement("h3");l.className="timeline__heading",l.textContent=t.heading,o.appendChild(l);const r=document.createElement("div");r.className="timeline__summary",r.textContent=t.summary,o.appendChild(r),n.appendChild(o);const d=document.createElement("div");d.className="timeline__modal-content";const m=document.createElement("div");return m.className="timeline__content-full",m.innerHTML=function(e){let t=e;return t=t.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),t=t.replace(/<form[^>]*>[\s\S]*?<\/form>/gi,""),t=t.replace(/<input[^>]*>/gi,""),t=t.replace(/<h1/gi,"<h3"),t=t.replace(/<\/h1>/gi,"</h3>"),t=t.replace(/<h2/gi,"<h3"),t=t.replace(/<\/h2>/gi,"</h3>"),t.trim()}(t.content),d.appendChild(m),n.appendChild(d),n.addEventListener("click",function(e){e.preventDefault(),"function"==typeof window.openTimelineModal&&window.openTimelineModal(n)}),n}(e))}),n):(d(n,"no-data","No timeline items provided"),null)}function v(e,t,i){const n=p(e,t,i);n&&y(n).then(()=>{g([n],i||{})})}function w(e,t){const i=document.querySelector(t);if(!i)return console.error("Timeline: Container not found:",t),void d(null,"missing-element","Timeline container not found: "+t);const n="timeline_cache_"+e;let o=null,a=null;if("undefined"!=typeof Storage)try{const e=localStorage.getItem(n);if(e){const t=JSON.parse(e);o=t.data,a=t.timestamp}}catch(e){console.warn("Timeline: Failed to parse cached data")}fetch(e).then(e=>{if(!e.ok)throw new Error("Failed to load: "+e.statusText);return e.json()}).then(e=>{if((!o||!e.lastupdated||new Date(e.lastupdated)>new Date(a))&&e.nodes&&"undefined"!=typeof Storage)try{localStorage.setItem(n,JSON.stringify({data:e.nodes,timestamp:e.lastupdated||(new Date).toISOString()}))}catch(e){console.warn("Timeline: Unable to cache data",e)}const r=e.nodes||e,s=Object.assign({},e);delete s.nodes,p(t,r,s),y(i).then(()=>{g([i],{}),b(i),l()})}).catch(e=>{console.error("Timeline: Error loading JSON:",e),o&&o.length>0?(console.log("Timeline: Using cached data as fallback"),p(t,o,{}),y(i).then(()=>{g([i],{}),b(i)})):d(i,"load-failed","Failed to load timeline data: "+e.message)})}function y(e){if(!e)return Promise.resolve();const t=Array.from(e.querySelectorAll("img"));return 0===t.length?Promise.resolve():new Promise(e=>{let i=t.length;const n=()=>{i-=1,i<=0&&e()};t.forEach(e=>{if(e.complete)n();else{const t=()=>{e.removeEventListener("load",t),e.removeEventListener("error",t),n()};e.addEventListener("load",t),e.addEventListener("error",t)}}),setTimeout(()=>e(),1e3)})}function b(e){if(!e)return;const t=e.previousElementSibling;t&&t.classList.contains("timeline__title")&&(t.offsetHeight,t.classList.add("timeline__title--visible"))}function x(e){if("undefined"!=typeof Storage)if(e){const t="timeline_cache_"+e;localStorage.removeItem(t),console.log("Timeline: Cleared cache for",e)}else{const e=Object.keys(localStorage);let t=0;e.forEach(e=>{e.startsWith("timeline_cache_")&&(localStorage.removeItem(e),t++)}),console.log("Timeline: Cleared",t,"cache(s)")}else console.warn("Timeline: localStorage not supported")}function _(e,t,i){return p(e,t,i)}return"undefined"!=typeof window&&(window.timeline=g,window.timelineFromData=v,window.renderTimelineFromData=p,window.processTimelineData=_,window.loadDataFromJson=w,window.clearTimelineCache=x,window.createTimelineModal=n,window.openTimelineModal=o,window.closeTimelineModal=a,window.handleTimelineDeepLinking=l,window.navigateTimelineToNodeIndex=r),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-json-config]").forEach(function(e){const t=e.getAttribute("data-json-config");if(!t)return;const i=(e.className||"").split(" ")[0],n=e.id?"#"+e.id:i?"."+i:null;n&&w(t,n)})}),"undefined"!=typeof window&&window.jQuery&&(window.jQuery.fn.timeline=function(e){return g(this,e),this}),e.clearTimelineCache=x,e.closeTimelineModal=a,e.createTimelineModal=n,e.handleDeepLinking=l,e.loadDataFromJson=w,e.navigateToNodeIndex=r,e.openTimelineModal=o,e.processTimelineData=_,e.renderTimelineFromData=p,e.timeline=g,e.timelineFromData=v,e}({});
//# sourceMappingURL=timeline.min.js.map
